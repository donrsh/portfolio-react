import{R as Ce,r as a,j as n}from"./jsx-runtime-JVR6BLX4.js";import{c as Fe}from"./createSub-CFYt2xaS.js";import{c as je,u as Ne}from"./with-selector-DyLZNxmq.js";import{u as ke}from"./useHorizontalScroll-CzhzS8ks.js";import{P as E,c as O,u as W,a as Pe,b as R,d as _e,e as Me,f as Ae,C as De}from"./react-icons.esm-BfbKpci0.js";import{c as G,a as Ke,u as T}from"./cn-BRrbDnA6.js";import{c as Oe,u as H}from"./index-Cl91VgWi.js";import{T as x}from"./typogrphy-AKG8ZSMC.js";import{B as Ge}from"./button-C0O-YeUW.js";import"./index-C1zmamBb.js";const{useDebugValue:Te}=Ce,{useSyncExternalStoreWithSelector:ze}=Ne,Ve=e=>e;function Le(e,t=Ve,r){const o=ze(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return Te(o),o}const U=(e,t)=>{const r=je(e),o=(c,s=t)=>Le(r,c,s);return Object.assign(o,r),o},qe=(e,t)=>e?U(e,t):U;function Ue(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[o,c]of e)if(!Object.is(c,t.get(o)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const o of r)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}const $="data-auto-focus-item-when-scrolling",Y=a.createContext(null),B=()=>a.useContext(Y),F=(...e)=>B()(...e),$e=e=>qe((r,o,c)=>({set:r,scrollContainer:null,scrollContainerRef(s){r({scrollContainer:s})},scrollContainerObserver:null,scrollingDirection:null,itemElKeyMap:new WeakMap,inViewItemEls:new Set,inViewItemKeys:new Set,setInViewItemEls(s,i){const{inViewItemEls:u,itemElKeyMap:l}=o();s.forEach(p=>u.add(p)),i.forEach(p=>u.delete(p));const d=new Set(u),f=new Set([...d].map(p=>l.get(p)??null));f.delete(null),r({inViewItemEls:new Set(u),inViewItemKeys:f})},focusItemEl:null,focusItemKey:null,updateFocus(){const{inViewItemEls:s,scrollContainer:i,scrollingDirection:u,focusItemEl:l,itemElKeyMap:d}=o();if(s.has(l))return;let f=[...(i==null?void 0:i.querySelectorAll(`[${$}]`))??[]];u==="backward"&&f.reverse();const p=f.find(m=>s.has(m))??null,h=d.get(p)??null;r({focusItemEl:p,focusItemKey:h})},useItem(s){const i=a.useRef(),[u,l,d,f]=B()(m=>[m.focusItemEl,m.set,m.scrollContainerObserver,m.itemElKeyMap]);a.useEffect(()=>{i.current&&d&&(i.current.setAttribute($,""),d==null||d.observe(i.current))},[d]),a.useEffect(()=>{if(!["string","number"].includes(typeof s)){console.error("[useItem] item key should be string or number. Please check.");return}i.current&&f.set(i.current,s)},[s]);const p=u===i.current,h=a.useCallback(()=>{l({focusItemEl:i.current,focusItemKey:s})},[l]);return a.useMemo(()=>({ref:i,isFocus:p,focus:h}),[i,p])}}),Ue),We=({children:e,scrollerDirection:t})=>{const[r]=a.useState(()=>$e()),[o,c,s,i]=r(u=>[u.scrollContainer,u.setInViewItemEls,u.updateFocus,u.set]);return a.useEffect(()=>{if(!o)return;const u=new IntersectionObserver((l,d)=>{c(l.filter(f=>f.isIntersecting).map(f=>f.target),l.filter(f=>!f.isIntersecting).map(f=>f.target))},{root:o,threshold:1});return i({scrollContainerObserver:u}),()=>{u.disconnect()}},[o,c,i]),a.useEffect(()=>{if(!o)return;const u=l=>{const f=(t==="horizontal"?-l.deltaX:l.deltaY)>=0?"forward":"backward";i({scrollingDirection:f}),s()};return o.addEventListener("wheel",u),()=>o.removeEventListener("wheel",u)},[o,i,s,t]),n.jsx(Y.Provider,{value:r,children:e})};var He="Label",X=a.forwardRef((e,t)=>n.jsx(E.label,{...e,ref:t,onMouseDown:r=>{var c;r.target.closest("button, input, select, textarea")||((c=e.onMouseDown)==null||c.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));X.displayName=He;var J=X;const Ye=Ke("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),D=a.forwardRef(({className:e,...t},r)=>n.jsx(J,{ref:r,className:G(Ye(),e),...t}));D.displayName=J.displayName;var M="rovingFocusGroup.onEntryFocus",Be={bubbles:!1,cancelable:!0},N="RovingFocusGroup",[K,Q,Xe]=Oe(N),[Je,Z]=O(N,[Xe]),[Qe,Ze]=Je(N),ee=a.forwardRef((e,t)=>n.jsx(K.Provider,{scope:e.__scopeRovingFocusGroup,children:n.jsx(K.Slot,{scope:e.__scopeRovingFocusGroup,children:n.jsx(et,{...e,ref:t})})}));ee.displayName=N;var et=a.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:o,loop:c=!1,dir:s,currentTabStopId:i,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:l,onEntryFocus:d,preventScrollOnEntryFocus:f=!1,...p}=e,h=a.useRef(null),m=T(t,h),v=H(s),[I=null,S]=W({prop:i,defaultProp:u,onChange:l}),[b,g]=a.useState(!1),k=Pe(d),ge=Q(r),P=a.useRef(!1),[Re,L]=a.useState(0);return a.useEffect(()=>{const y=h.current;if(y)return y.addEventListener(M,k),()=>y.removeEventListener(M,k)},[k]),n.jsx(Qe,{scope:r,orientation:o,dir:v,loop:c,currentTabStopId:I,onItemFocus:a.useCallback(y=>S(y),[S]),onItemShiftTab:a.useCallback(()=>g(!0),[]),onFocusableItemAdd:a.useCallback(()=>L(y=>y+1),[]),onFocusableItemRemove:a.useCallback(()=>L(y=>y-1),[]),children:n.jsx(E.div,{tabIndex:b||Re===0?-1:0,"data-orientation":o,...p,ref:m,style:{outline:"none",...e.style},onMouseDown:R(e.onMouseDown,()=>{P.current=!0}),onFocus:R(e.onFocus,y=>{const we=!P.current;if(y.target===y.currentTarget&&we&&!b){const q=new CustomEvent(M,Be);if(y.currentTarget.dispatchEvent(q),!q.defaultPrevented){const _=ge().filter(w=>w.focusable),xe=_.find(w=>w.active),Ee=_.find(w=>w.id===I),Se=[xe,Ee,..._].filter(Boolean).map(w=>w.ref.current);oe(Se,f)}}P.current=!1}),onBlur:R(e.onBlur,()=>g(!1))})})}),te="RovingFocusGroupItem",re=a.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:o=!0,active:c=!1,tabStopId:s,...i}=e,u=_e(),l=s||u,d=Ze(te,r),f=d.currentTabStopId===l,p=Q(r),{onFocusableItemAdd:h,onFocusableItemRemove:m}=d;return a.useEffect(()=>{if(o)return h(),()=>m()},[o,h,m]),n.jsx(K.ItemSlot,{scope:r,id:l,focusable:o,active:c,children:n.jsx(E.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...i,ref:t,onMouseDown:R(e.onMouseDown,v=>{o?d.onItemFocus(l):v.preventDefault()}),onFocus:R(e.onFocus,()=>d.onItemFocus(l)),onKeyDown:R(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){d.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const I=ot(v,d.orientation,d.dir);if(I!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let b=p().filter(g=>g.focusable).map(g=>g.ref.current);if(I==="last")b.reverse();else if(I==="prev"||I==="next"){I==="prev"&&b.reverse();const g=b.indexOf(v.currentTarget);b=d.loop?nt(b,g+1):b.slice(g+1)}setTimeout(()=>oe(b))}})})})});re.displayName=te;var tt={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function rt(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ot(e,t,r){const o=rt(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return tt[o]}function oe(e,t=!1){const r=document.activeElement;for(const o of e)if(o===r||(o.focus({preventScroll:t}),document.activeElement!==r))return}function nt(e,t){return e.map((r,o)=>e[(t+o)%e.length])}var st=ee,it=re;function at(e){const[t,r]=a.useState(void 0);return Me(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const o=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const s=c[0];let i,u;if("borderBoxSize"in s){const l=s.borderBoxSize,d=Array.isArray(l)?l[0]:l;i=d.inlineSize,u=d.blockSize}else i=e.offsetWidth,u=e.offsetHeight;r({width:i,height:u})});return o.observe(e,{box:"border-box"}),()=>o.unobserve(e)}else r(void 0)},[e]),t}function ct(e){const t=a.useRef({value:e,previous:e});return a.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var z="Radio",[ut,ne]=O(z),[lt,dt]=ut(z),se=a.forwardRef((e,t)=>{const{__scopeRadio:r,name:o,checked:c=!1,required:s,disabled:i,value:u="on",onCheck:l,...d}=e,[f,p]=a.useState(null),h=T(t,I=>p(I)),m=a.useRef(!1),v=f?!!f.closest("form"):!0;return n.jsxs(lt,{scope:r,checked:c,disabled:i,children:[n.jsx(E.button,{type:"button",role:"radio","aria-checked":c,"data-state":ce(c),"data-disabled":i?"":void 0,disabled:i,value:u,...d,ref:h,onClick:R(e.onClick,I=>{c||l==null||l(),v&&(m.current=I.isPropagationStopped(),m.current||I.stopPropagation())})}),v&&n.jsx(ft,{control:f,bubbles:!m.current,name:o,value:u,checked:c,required:s,disabled:i,style:{transform:"translateX(-100%)"}})]})});se.displayName=z;var ie="RadioIndicator",ae=a.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:o,...c}=e,s=dt(ie,r);return n.jsx(Ae,{present:o||s.checked,children:n.jsx(E.span,{"data-state":ce(s.checked),"data-disabled":s.disabled?"":void 0,...c,ref:t})})});ae.displayName=ie;var ft=e=>{const{control:t,checked:r,bubbles:o=!0,...c}=e,s=a.useRef(null),i=ct(r),u=at(t);return a.useEffect(()=>{const l=s.current,d=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(d,"checked").set;if(i!==r&&p){const h=new Event("click",{bubbles:o});p.call(l,r),l.dispatchEvent(h)}},[i,r,o]),n.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:r,...c,tabIndex:-1,ref:s,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function ce(e){return e?"checked":"unchecked"}var mt=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],V="RadioGroup",[pt,Pt]=O(V,[Z,ne]),ue=Z(),le=ne(),[vt,ht]=pt(V),de=a.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:o,defaultValue:c,value:s,required:i=!1,disabled:u=!1,orientation:l,dir:d,loop:f=!0,onValueChange:p,...h}=e,m=ue(r),v=H(d),[I,S]=W({prop:s,defaultProp:c,onChange:p});return n.jsx(vt,{scope:r,name:o,required:i,disabled:u,value:I,onValueChange:S,children:n.jsx(st,{asChild:!0,...m,orientation:l,dir:v,loop:f,children:n.jsx(E.div,{role:"radiogroup","aria-required":i,"aria-orientation":l,"data-disabled":u?"":void 0,dir:v,...h,ref:t})})})});de.displayName=V;var fe="RadioGroupItem",me=a.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:o,...c}=e,s=ht(fe,r),i=s.disabled||o,u=ue(r),l=le(r),d=a.useRef(null),f=T(t,d),p=s.value===c.value,h=a.useRef(!1);return a.useEffect(()=>{const m=I=>{mt.includes(I.key)&&(h.current=!0)},v=()=>h.current=!1;return document.addEventListener("keydown",m),document.addEventListener("keyup",v),()=>{document.removeEventListener("keydown",m),document.removeEventListener("keyup",v)}},[]),n.jsx(it,{asChild:!0,...u,focusable:!i,active:p,children:n.jsx(se,{disabled:i,required:s.required,checked:p,...l,...c,name:s.name,ref:f,onCheck:()=>s.onValueChange(c.value),onKeyDown:R(m=>{m.key==="Enter"&&m.preventDefault()}),onFocus:R(c.onFocus,()=>{var m;h.current&&((m=d.current)==null||m.click())})})})});me.displayName=fe;var It="RadioGroupIndicator",pe=a.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...o}=e,c=le(r);return n.jsx(ae,{...c,...o,ref:t})});pe.displayName=It;var ve=de,he=me,yt=pe;const Ie=a.forwardRef(({className:e,...t},r)=>n.jsx(ve,{className:G("grid gap-2",e),...t,ref:r}));Ie.displayName=ve.displayName;const ye=a.forwardRef(({className:e,...t},r)=>n.jsx(he,{ref:r,className:G("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:n.jsx(yt,{className:"flex items-center justify-center",children:n.jsx(De,{className:"h-3.5 w-3.5 fill-primary"})})}));ye.displayName=he.displayName;const be=e=>({id:e,title:`Item ${e+1}`,text:[e%4>=0&&"Lorem ipsum dolor sit amet consectetur adipisicing elit.",e%4>=1&&"Minus quidem,",e%4>=2&&"reprehenderit aliquid iure esse quibusdam perspiciatis modi doloremque nobis at voluptatem repellat dignissimos nihil enim aspernatur eos?",e%4>=3&&"Fuga, accusantium incidunt."].filter(Boolean).join(" ")});let C=new Array(20).fill(null).map((e,t)=>be(t));const A=e=>C.find(t=>t.id===e)??null,bt=(...e)=>a.useMemo(()=>t=>{e.forEach(r=>{typeof r=="function"&&r(t),typeof r=="object"&&r!==null&&(r.current=t)})},[e]),j=Fe({Status:()=>{const[e,t,r]=F(s=>[s.scrollingDirection,s.inViewItemKeys,s.focusItemKey]),o=a.useMemo(()=>t?[...t].map(A):[],[t]),c=a.useMemo(()=>A(r),[r]);return n.jsxs("div",{className:"my-4",children:[n.jsx(x,{variant:"large",children:"Status"}),n.jsxs("div",{children:[n.jsx(x,{variant:"inlineCode",children:"scrolling direction"}),":"," ",n.jsx("code",{children:e})]}),n.jsxs("div",{children:[n.jsx(x,{variant:"inlineCode",children:"items in view"}),":"," ",o.map(s=>s==null?void 0:s.title).join(", ")]}),n.jsxs("div",{children:[n.jsx(x,{variant:"inlineCode",children:"focus item"}),":"," ",c==null?void 0:c.title]})]})},Item:({id:e,title:t,text:r})=>{const{ref:o,isFocus:c,focus:s}=F(i=>i.useItem(e));return n.jsx("div",{ref:o,className:`border-b-2 border-gray-300 p-2 cursor-pointer w-[120px] shrink-0 text-center ${c?"opacity-100":"opacity-40"}`,onClick:s,children:n.jsx("p",{children:n.jsx("b",{children:t})})})},Items:({scrollerDirection:e})=>{const t=F(i=>i.scrollContainerRef),r=ke(),[,o]=a.useReducer(i=>i+1,0),c=bt(t,e==="horizontal"?r:null),s=a.useCallback(()=>{C[C.length]=be(C.length),o()},[]);return n.jsxs("div",{ref:c,className:`overflow-auto flex flex-none border-gray-300 ${e==="vertical"?"border-r ":""} `,style:{height:e==="vertical"?"100%":"fit-content",flexDirection:e==="horizontal"?"row":"column"},children:[C.map(i=>n.jsx(j.Item,{...i},i.id)),n.jsx("div",{className:"sticky",style:{[e==="horizontal"?"right":"bottom"]:0},children:n.jsx(Ge,{onClick:s,children:"Add an item"})})]})},FocusItem:()=>{const e=F(r=>r.focusItemKey),t=a.useMemo(()=>A(e),[e]);return t&&n.jsxs("div",{className:"p-4 overflow-auto",children:[n.jsx(x,{variant:"large",className:"-mb-3",children:t.title}),n.jsx(x,{variant:"p",children:t.text})]})}});function _t(){const[e,t]=a.useState("vertical");return n.jsxs("div",{className:"px-4",children:[n.jsxs("div",{className:"flex gap-2 mb-2",children:[n.jsx(D,{children:"Scroller Direction"}),n.jsx(Ie,{className:"flex gap-2",value:e,children:["vertical","horizontal"].map(r=>n.jsxs("div",{className:"flex items-center gap-2",onClick:()=>t(r),children:[n.jsx(ye,{value:r},r),n.jsx(D,{children:r})]},r))})]}),n.jsx("hr",{}),n.jsxs(We,{scrollerDirection:e,children:[n.jsx(j.Status,{}),n.jsxs("div",{className:"w-full flex h-[300px] border border-gray-300",style:{flexDirection:e==="horizontal"?"column":"row"},children:[n.jsx(j.Items,{scrollerDirection:e}),n.jsx(j.FocusItem,{})]})]},e)]})}export{_t as default};
