import{r as h,g as k,R as A,j as o}from"./jsx-runtime-JVR6BLX4.js";import{S as P}from"./SourceCodeRefs-rCv9e738.js";var _={BASE_URL:"/portfolio-react/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const y=t=>{let e;const n=new Set,s=(a,f)=>{const d=typeof a=="function"?a(e):a;if(!Object.is(d,e)){const c=e;e=f??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(p=>p(e,c))}},r=()=>e,u={setState:s,getState:r,getInitialState:()=>v,subscribe:a=>(n.add(a),()=>n.delete(a)),destroy:()=>{(_?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},v=e=t(s,r,u);return u},z=t=>t?y(t):y;var j={exports:{}},T={},D={exports:{}},R={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S=h;function I(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var O=typeof Object.is=="function"?Object.is:I,F=S.useState,V=S.useEffect,$=S.useLayoutEffect,W=S.useDebugValue;function M(t,e){var n=e(),s=F({inst:{value:n,getSnapshot:e}}),r=s[0].inst,i=s[1];return $(function(){r.value=n,r.getSnapshot=e,E(r)&&i({inst:r})},[t,n,e]),V(function(){return E(r)&&i({inst:r}),t(function(){E(r)&&i({inst:r})})},[t]),W(n),n}function E(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!O(t,n)}catch{return!0}}function q(t,e){return e()}var B=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?q:M;R.useSyncExternalStore=S.useSyncExternalStore!==void 0?S.useSyncExternalStore:B;D.exports=R;var L=D.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g=h,U=L;function H(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var N=typeof Object.is=="function"?Object.is:H,G=U.useSyncExternalStore,J=g.useRef,K=g.useEffect,Q=g.useMemo,X=g.useDebugValue;T.useSyncExternalStoreWithSelector=function(t,e,n,s,r){var i=J(null);if(i.current===null){var l={hasValue:!1,value:null};i.current=l}else l=i.current;i=Q(function(){function u(c){if(!v){if(v=!0,a=c,c=s(c),r!==void 0&&l.hasValue){var p=l.value;if(r(p,c))return f=p}return f=c}if(p=f,N(a,c))return p;var x=s(c);return r!==void 0&&r(p,x)?p:(a=c,f=x)}var v=!1,a,f,d=n===void 0?null:n;return[function(){return u(e())},d===null?void 0:function(){return u(d())}]},[e,n,s,r]);var m=G(t,i[0],i[1]);return K(function(){l.hasValue=!0,l.value=m},[m]),X(m),m};j.exports=T;var Y=j.exports;const Z=k(Y);var C={BASE_URL:"/portfolio-react/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:tt}=A,{useSyncExternalStoreWithSelector:et}=Z;let b=!1;const nt=t=>t;function rt(t,e=nt,n){(C?"production":void 0)!=="production"&&n&&!b&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),b=!0);const s=et(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return tt(s),s}const w=t=>{(C?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?z(t):t,n=(s,r)=>rt(e,s,r);return Object.assign(n,e),n},ot=t=>t?w(t):w,st=({expireTime:t,watchExpireIntervalDelay:e=1e3})=>ot()((n,s)=>{let r=null,i=null;const l=()=>{r=null,n({current:null})},m=()=>{r=Date.now(),typeof i=="number"&&clearInterval(i),i=window.setInterval(()=>{if(typeof r!="number"){clearInterval(i);return}if(Date.now()-r>t){l();return}},e)};return{isPrompting:!1,prompt(){n({isPrompting:!0})},promptConfirm(u){if(!s().isPrompting){console.warn("[TmpAuthorizationStore] store.isisPrompting is `false` now. This is no-op.");return}m(),n({isPrompting:!1,current:u})},promptCancel(){if(!s().isPrompting){console.warn("[TmpAuthorizationStore] store.isisPrompting is `false` now. This is no-op.");return}n({isPrompting:!1})},current:null,clear:l,prolong(u){if(typeof r!="number")return null;r+=u},getTimeToExpire(){if(typeof r!="number")return null;const u=r+t-Date.now();return u>0?u:null}}}),it=[{title:"This page",link:"https://github.com/donrsh/portfolio-react/blob/main/app/routes/demo.useTmpAuthorization-zustand.tsx"},{title:o.jsxs(o.Fragment,{children:[o.jsx("code",{children:"TmpAuthorization"})," type def"]}),link:"https://github.com/donrsh/web-apps-workspace/blob/main/libs/react/src/hooks/useTmpAuthorization/types/index.ts"},{title:o.jsxs(o.Fragment,{children:[o.jsx("code",{children:"useTmpAuthorization"})," zustand implementation"]}),link:"https://github.com/donrsh/web-apps-workspace/tree/main/libs/react/src/hooks/useTmpAuthorization/zustand"}],ut=st({expireTime:3*60*1e3});function lt(){const{current:t,prompt:e,isPrompting:n,promptCancel:s,promptConfirm:r,getTimeToExpire:i,prolong:l,clear:m}=ut(),u=h.useRef(),v=h.useRef(),[a,f]=h.useState();h.useEffect(()=>{var c,p;n?(c=u.current)==null||c.showModal():(p=u.current)==null||p.close()},[n]),h.useEffect(()=>{clearInterval(v.current),f(void 0),t&&(v.current=window.setInterval(()=>{f(Math.round((i()??0)/1e3))},1e3))},[t]);const d=h.useCallback(c=>{c.preventDefault();const x=new FormData(c.target).get("name");x&&x.trim()&&r({name:x})},[]);return o.jsxs(o.Fragment,{children:[o.jsx("div",{children:t?o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:["Hi, ",t.name," ",a&&a+"s"]}),o.jsxs("div",{style:{display:"flex",gap:8},children:[o.jsx("button",{onClick:()=>l(5*60*1e3),children:"prolong 5 mins"}),o.jsx("button",{onClick:m,children:"leave"})]})]}):o.jsx("button",{onClick:e,children:"Click to start!"})}),o.jsx("dialog",{ref:u,children:o.jsxs("form",{onSubmit:d,children:[o.jsx("p",{children:"What's your name?"}),o.jsx("input",{type:"text",name:"name",id:""}),o.jsx("br",{}),o.jsxs("div",{className:"row-vcenter",style:{marginTop:20,justifyContent:"space-between"},children:[o.jsx("button",{type:"button",onClick:s,children:"cancel"}),o.jsx("button",{type:"submit",children:"confirm"})]})]})}),o.jsx("hr",{}),o.jsx(P,{open:!0,data:it,style:{marginBlock:16}})]})}export{lt as default};
