import{g as ee,r as y,j as a}from"./jsx-runtime-JVR6BLX4.js";import{u as B}from"./useToggler-DAZg9NR_.js";import{_ as p,a as g,b as T,d as H,e as R,c as te}from"./createSub-CFYt2xaS.js";function z(t){return function e(n,r,i){switch(arguments.length){case 0:return e;case 1:return p(n)?e:g(function(o,u){return t(n,o,u)});case 2:return p(n)&&p(r)?e:p(n)?g(function(o,u){return t(o,r,u)}):p(r)?g(function(o,u){return t(n,o,u)}):T(function(o){return t(n,r,o)});default:return p(n)&&p(r)&&p(i)?e:p(n)&&p(r)?g(function(o,u){return t(o,u,i)}):p(n)&&p(i)?g(function(o,u){return t(o,r,u)}):p(r)&&p(i)?g(function(o,u){return t(n,o,u)}):p(n)?T(function(o){return t(o,r,i)}):p(r)?T(function(o){return t(n,o,i)}):p(i)?T(function(o){return t(n,r,o)}):t(n,r,i)}}}const ne=Number.isInteger||function(e){return e<<0===e};function V(t){return Object.prototype.toString.call(t)==="[object String]"}function re(t,e){var n=t<0?e.length+t:t;return V(e)?e.charAt(n):e[n]}var oe=g(function(e,n){if(n!=null)return ne(e)?re(e,n):n[e]}),ie=T(function(e){return H(e)?!0:!e||typeof e!="object"||V(e)?!1:e.length===0?!0:e.length>0?e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1):!1}),F=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function ue(t,e,n){return function(i,o,u){if(ie(u))return t(i,o,u);if(u==null)return o;if(typeof u["fantasy-land/reduce"]=="function")return e(i,o,u,"fantasy-land/reduce");if(u[F]!=null)return n(i,o,u[F]());if(typeof u.next=="function")return n(i,o,u);if(typeof u.reduce=="function")return e(i,o,u,"reduce");throw new TypeError("reduce: list must be array or iterable")}}function se(t,e,n){for(var r=0,i=n.length;r<i;){if(e=t["@@transducer/step"](e,n[r]),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r+=1}return t["@@transducer/result"](e)}var ae=g(function(e,n){return R(e.length,function(){return e.apply(n,arguments)})});function le(t,e,n){for(var r=n.next();!r.done;){if(e=t["@@transducer/step"](e,r.value),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r=n.next()}return t["@@transducer/result"](e)}function ce(t,e,n,r){return t["@@transducer/result"](n[r](ae(t["@@transducer/step"],t),e))}var pe=ue(se,ce,le),fe=function(){function t(e){this.f=e}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(e){return e},t.prototype["@@transducer/step"]=function(e,n){return this.f(e,n)},t}();function de(t){return new fe(t)}var he=z(function(t,e,n){return pe(typeof t=="function"?de(t):t,e,n)});function me(t,e){return function(){return e.call(this,t.apply(this,arguments))}}function Y(t,e){return function(){var n=arguments.length;if(n===0)return e();var r=arguments[n-1];return H(r)||typeof r[t]!="function"?e.apply(this,arguments):r[t].apply(r,Array.prototype.slice.call(arguments,0,n-1))}}var ve=z(Y("slice",function(e,n,r){return Array.prototype.slice.call(r,e,n)})),ge=T(Y("tail",ve(1,1/0)));function ye(){if(arguments.length===0)throw new Error("pipe requires at least one argument");return R(arguments[0].length,he(me,arguments[0],ge(arguments)))}var we=g(function(e,n){return n==null||n!==n?e:n}),Ee=z(function(e,n,r){var i=e(n),o=e(r);return i>o?-1:i<o?1:0}),je=g(function(e,n){return Array.prototype.slice.call(n,0).sort(function(r,i){for(var o=0,u=0;o===0&&u<e.length;)o=e[u](r,i),u+=1;return o})}),K={exports:{}};(function(t){var e=Object.assign||function(r){for(var i,o=1;o<arguments.length;o++)for(var u in i=arguments[o],i)Object.prototype.hasOwnProperty.call(i,u)&&(r[u]=i[u]);return r},n=function(r,i){if(r){typeof window<"u"&&function(){function l(f,v){v=v||{bubbles:!1,cancelable:!1,detail:void 0};var j=document.createEvent("CustomEvent");return j.initCustomEvent(f,v.bubbles,v.cancelable,v.detail),j}return typeof window.CustomEvent!="function"&&(l.prototype=window.Event.prototype,void(window.CustomEvent=l))}(),i||(i={}),i=e({},{minHorizontal:10,minVertical:10,deltaHorizontal:3,deltaVertical:5,preventScroll:!1,lockAxis:!0,touch:!0,mouse:!0},i);var o=[],u=!1,D=function(){u=!0},s=function(l){u=!1,A(l)},m=function(l){u&&(l.changedTouches=[{clientX:l.clientX,clientY:l.clientY}],S(l))};i.mouse&&(r.addEventListener("mousedown",D),r.addEventListener("mouseup",s),r.addEventListener("mousemove",m));var A=function(l){var f=Math.abs,v=Math.max,j=Math.min;if(o.length){for(var C=typeof TouchEvent=="function"&&l instanceof TouchEvent,d=[],h=[],c={top:!1,right:!1,bottom:!1,left:!1},_=0;_<o.length;_++)d.push(o[_].x),h.push(o[_].y);var O=d[0],k=d[d.length-1],I=h[0],W=h[h.length-1],N={x:[O,k],y:[I,W]};if(1<o.length){var J={detail:e({touch:C,target:l.target},N)},G=new CustomEvent("swiperelease",J);r.dispatchEvent(G)}var b=d[0]-d[d.length-1],x="none";x=0<b?"left":"right";var w,M=j.apply(Math,d),P=v.apply(Math,d);if(f(b)>=i.minHorizontal&&(x=="left"?(w=f(M-d[d.length-1]),w<=i.deltaHorizontal&&(c.left=!0)):x=="right"&&(w=f(P-d[d.length-1]),w<=i.deltaHorizontal&&(c.right=!0))),b=h[0]-h[h.length-1],x="none",x=0<b?"top":"bottom",M=j.apply(Math,h),P=v.apply(Math,h),f(b)>=i.minVertical&&(x=="top"?(w=f(M-h[h.length-1]),w<=i.deltaVertical&&(c.top=!0)):x=="bottom"&&(w=f(P-h[h.length-1]),w<=i.deltaVertical&&(c.bottom=!0))),o=[],c.top||c.right||c.bottom||c.left){i.lockAxis&&((c.left||c.right)&&f(O-k)>f(I-W)?c.top=c.bottom=!1:(c.top||c.bottom)&&f(O-k)<f(I-W)&&(c.left=c.right=!1));var Q={detail:e({directions:c,touch:C,target:l.target},N)},Z=new CustomEvent("swipe",Q);r.dispatchEvent(Z)}else{var $=new CustomEvent("swipecancel",{detail:e({touch:C,target:l.target},N)});r.dispatchEvent($)}}},S=function(l){var f=l.changedTouches[0];if(o.push({x:f.clientX,y:f.clientY}),1<o.length){var v=o[0].x,j=o[o.length-1].x,C=o[0].y,d=o[o.length-1].y,h={detail:{x:[v,j],y:[C,d],touch:typeof TouchEvent=="function"&&l instanceof TouchEvent,target:l.target}},c=new CustomEvent("swiping",h),_=i.preventScroll===!0||typeof i.preventScroll=="function"&&i.preventScroll(c);_&&l.preventDefault(),r.dispatchEvent(c)}},E=!1;try{var L=Object.defineProperty({},"passive",{get:function(){E={passive:!i.preventScroll}}});window.addEventListener("testPassive",null,L),window.removeEventListener("testPassive",null,L)}catch{}return i.touch&&(r.addEventListener("touchmove",S,E),r.addEventListener("touchend",A)),{off:function(){r.removeEventListener("touchmove",S,E),r.removeEventListener("touchend",A),r.removeEventListener("mousedown",D),r.removeEventListener("mouseup",s),r.removeEventListener("mousemove",m)}}}};t.exports=n,t.exports.default=n})(K);var xe=K.exports;const Se=ee(xe),U="applet.fullscreen-emoji.emoji-cache",q=ye(()=>localStorage.getItem(U)??"null",JSON.parse,we([]),je([Ee(oe("usedTimes"))])),_e=t=>{const e=q(),n=e.find(r=>r.emoji===t);n?n.usedTimes+=1:e.push({emoji:t,usedTimes:1}),localStorage.setItem(U,JSON.stringify(e))},Te="/portfolio-react/assets/emoji-favicon-Da_G2-bh.png",Le="/portfolio-react/assets/Why-you-need-an-app-for-full-screen-emoji-DDt0yydU.png",X=te({WhatIsThisAppFor:()=>{const t=B(),e=y.useCallback(n=>{n.preventDefault(),t.open()},[t]);return a.jsxs("div",{style:{marginBlock:16},children:[a.jsx("a",{href:"#",style:{fontStyle:"oblique"},onClick:e,children:"What is this for?"}),a.jsxs("dialog",{open:t.isOpen,onClose:t.close,children:[a.jsx("img",{src:Le,alt:"",style:{width:"100%",maxWidth:500}}),a.jsxs("div",{className:"row-vcenter",style:{gap:8},children:[a.jsx("span",{children:"Source"}),a.jsx("a",{href:"https://www.youtube.com/watch?v=TfNnpsYATbQ",target:"_blank",rel:"noreferrer",style:{flex:1},children:"TBBT S10E14: The Emotion Detection Automation"}),a.jsx("button",{onClick:t.close,style:{marginLeft:"auto"},children:"OK"})]})]})]})},EmojiDialog:({emoji:t,onClose:e})=>{const n=y.useRef(null);return y.useEffect(()=>{const r=n.current;if(r)return Se(r),r.addEventListener("swipe",e),()=>r.removeEventListener("swipe",e)},[e]),a.jsx("div",{ref:n,className:"dialog center",style:{},children:a.jsx("div",{className:"emoji",children:t})})}});function Ae(){const{isOpen:t,openWithData:e,close:n,data:r}=B(),i=y.useCallback(s=>{e(s),_e(s)},[e]),o=y.useCallback(s=>{var L;s.preventDefault();const m=s.currentTarget,S=(L=new FormData(s.currentTarget).get("emoji"))==null?void 0:L.trim(),E=m.querySelector("input[name='emoji']");S&&E&&(E.blur(),E.value="",i(S))},[i]),u=y.useCallback(s=>{var m;s.key==="Enter"&&((m=s.currentTarget.form)==null||m.submit())},[]),D=y.useCallback(s=>{const m=s.currentTarget.dataset.emoji;m&&i(m)},[i]);return y.useEffect(()=>{const s=m=>{m.key==="Escape"&&n()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[n]),y.useEffect(()=>{let s=document.querySelector("link[rel~='icon']");s||(s=document.createElement("link"),s.rel="icon",document.head.appendChild(s)),s.href=Te},[]),a.jsxs(a.Fragment,{children:[t&&a.jsx(X.EmojiDialog,{emoji:r,onClose:n}),a.jsxs("div",{children:[a.jsx("form",{onSubmit:o,children:a.jsxs("label",{className:"row-vcenter",style:{gap:8,width:"100%"},children:[a.jsx("span",{style:{flex:0},children:"Emoji"}),a.jsx("input",{name:"emoji",onKeyUp:u,style:{flex:1,minWidth:120,fontSize:20}}),a.jsx("button",{type:"submit",style:{flex:0,paddingBlock:4},children:"Show!"})]})}),a.jsx(X.WhatIsThisAppFor,{}),a.jsx("div",{className:"shortcut-buttons",children:q().map(s=>a.jsx("button",{"data-emoji":s.emoji,onClick:D,style:{fontSize:20},children:s.emoji},s.emoji))})]})]})}export{Ae as default};
