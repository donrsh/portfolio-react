import{g as te,r as y,j as u}from"./jsx-runtime-JVR6BLX4.js";import{u as H}from"./useToggler-DAZg9NR_.js";import{_ as p,a as g,b as S,d as R,e as V,c as ne}from"./createSub-CFYt2xaS.js";import{I as re,D as oe,a as ie,b as se,d as ae}from"./input-CS4-b340.js";import{B as N}from"./button-CQLrvouU.js";import"./react-icons.esm-CvWY3AL7.js";import"./index-C1zmamBb.js";import"./cn-DTPrpecD.js";function F(n){return function e(t,r,i){switch(arguments.length){case 0:return e;case 1:return p(t)?e:g(function(o,s){return n(t,o,s)});case 2:return p(t)&&p(r)?e:p(t)?g(function(o,s){return n(o,r,s)}):p(r)?g(function(o,s){return n(t,o,s)}):S(function(o){return n(t,r,o)});default:return p(t)&&p(r)&&p(i)?e:p(t)&&p(r)?g(function(o,s){return n(o,s,i)}):p(t)&&p(i)?g(function(o,s){return n(o,r,s)}):p(r)&&p(i)?g(function(o,s){return n(t,o,s)}):p(t)?S(function(o){return n(o,r,i)}):p(r)?S(function(o){return n(t,o,i)}):p(i)?S(function(o){return n(t,r,o)}):n(t,r,i)}}}const ue=Number.isInteger||function(e){return e<<0===e};function Y(n){return Object.prototype.toString.call(n)==="[object String]"}function le(n,e){var t=n<0?e.length+n:n;return Y(e)?e.charAt(t):e[t]}var ce=g(function(e,t){if(t!=null)return ue(e)?le(e,t):t[e]}),pe=S(function(e){return R(e)?!0:!e||typeof e!="object"||Y(e)?!1:e.length===0?!0:e.length>0?e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1):!1}),X=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function fe(n,e,t){return function(i,o,s){if(pe(s))return n(i,o,s);if(s==null)return o;if(typeof s["fantasy-land/reduce"]=="function")return e(i,o,s,"fantasy-land/reduce");if(s[X]!=null)return t(i,o,s[X]());if(typeof s.next=="function")return t(i,o,s);if(typeof s.reduce=="function")return e(i,o,s,"reduce");throw new TypeError("reduce: list must be array or iterable")}}function de(n,e,t){for(var r=0,i=t.length;r<i;){if(e=n["@@transducer/step"](e,t[r]),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r+=1}return n["@@transducer/result"](e)}var me=g(function(e,t){return V(e.length,function(){return e.apply(t,arguments)})});function he(n,e,t){for(var r=t.next();!r.done;){if(e=n["@@transducer/step"](e,r.value),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r=t.next()}return n["@@transducer/result"](e)}function ve(n,e,t,r){return n["@@transducer/result"](t[r](me(n["@@transducer/step"],n),e))}var ge=fe(de,ve,he),ye=function(){function n(e){this.f=e}return n.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},n.prototype["@@transducer/result"]=function(e){return e},n.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},n}();function we(n){return new ye(n)}var Ee=F(function(n,e,t){return ge(typeof n=="function"?we(n):n,e,t)});function xe(n,e){return function(){return e.call(this,n.apply(this,arguments))}}function U(n,e){return function(){var t=arguments.length;if(t===0)return e();var r=arguments[t-1];return R(r)||typeof r[n]!="function"?e.apply(this,arguments):r[n].apply(r,Array.prototype.slice.call(arguments,0,t-1))}}var je=F(U("slice",function(e,t,r){return Array.prototype.slice.call(r,e,t)})),Te=S(U("tail",je(1,1/0)));function _e(){if(arguments.length===0)throw new Error("pipe requires at least one argument");return V(arguments[0].length,Ee(xe,arguments[0],Te(arguments)))}var Se=g(function(e,t){return t==null||t!==t?e:t}),De=F(function(e,t,r){var i=e(t),o=e(r);return i>o?-1:i<o?1:0}),Ce=g(function(e,t){return Array.prototype.slice.call(t,0).sort(function(r,i){for(var o=0,s=0;o===0&&s<e.length;)o=e[s](r,i),s+=1;return o})}),J={exports:{}};(function(n){var e=Object.assign||function(r){for(var i,o=1;o<arguments.length;o++)for(var s in i=arguments[o],i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s]);return r},t=function(r,i){if(r){typeof window<"u"&&function(){function l(f,v){v=v||{bubbles:!1,cancelable:!1,detail:void 0};var x=document.createEvent("CustomEvent");return x.initCustomEvent(f,v.bubbles,v.cancelable,v.detail),x}return typeof window.CustomEvent!="function"&&(l.prototype=window.Event.prototype,void(window.CustomEvent=l))}(),i||(i={}),i=e({},{minHorizontal:10,minVertical:10,deltaHorizontal:3,deltaVertical:5,preventScroll:!1,lockAxis:!0,touch:!0,mouse:!0},i);var o=[],s=!1,b=function(){s=!0},a=function(l){s=!1,A(l)},h=function(l){s&&(l.changedTouches=[{clientX:l.clientX,clientY:l.clientY}],T(l))};i.mouse&&(r.addEventListener("mousedown",b),r.addEventListener("mouseup",a),r.addEventListener("mousemove",h));var A=function(l){var f=Math.abs,v=Math.max,x=Math.min;if(o.length){for(var C=typeof TouchEvent=="function"&&l instanceof TouchEvent,d=[],m=[],c={top:!1,right:!1,bottom:!1,left:!1},_=0;_<o.length;_++)d.push(o[_].x),m.push(o[_].y);var O=d[0],I=d[d.length-1],k=m[0],W=m[m.length-1],M={x:[O,I],y:[k,W]};if(1<o.length){var G={detail:e({touch:C,target:l.target},M)},Q=new CustomEvent("swiperelease",G);r.dispatchEvent(Q)}var L=d[0]-d[d.length-1],j="none";j=0<L?"left":"right";var w,z=x.apply(Math,d),P=v.apply(Math,d);if(f(L)>=i.minHorizontal&&(j=="left"?(w=f(z-d[d.length-1]),w<=i.deltaHorizontal&&(c.left=!0)):j=="right"&&(w=f(P-d[d.length-1]),w<=i.deltaHorizontal&&(c.right=!0))),L=m[0]-m[m.length-1],j="none",j=0<L?"top":"bottom",z=x.apply(Math,m),P=v.apply(Math,m),f(L)>=i.minVertical&&(j=="top"?(w=f(z-m[m.length-1]),w<=i.deltaVertical&&(c.top=!0)):j=="bottom"&&(w=f(P-m[m.length-1]),w<=i.deltaVertical&&(c.bottom=!0))),o=[],c.top||c.right||c.bottom||c.left){i.lockAxis&&((c.left||c.right)&&f(O-I)>f(k-W)?c.top=c.bottom=!1:(c.top||c.bottom)&&f(O-I)<f(k-W)&&(c.left=c.right=!1));var Z={detail:e({directions:c,touch:C,target:l.target},M)},$=new CustomEvent("swipe",Z);r.dispatchEvent($)}else{var ee=new CustomEvent("swipecancel",{detail:e({touch:C,target:l.target},M)});r.dispatchEvent(ee)}}},T=function(l){var f=l.changedTouches[0];if(o.push({x:f.clientX,y:f.clientY}),1<o.length){var v=o[0].x,x=o[o.length-1].x,C=o[0].y,d=o[o.length-1].y,m={detail:{x:[v,x],y:[C,d],touch:typeof TouchEvent=="function"&&l instanceof TouchEvent,target:l.target}},c=new CustomEvent("swiping",m),_=i.preventScroll===!0||typeof i.preventScroll=="function"&&i.preventScroll(c);_&&l.preventDefault(),r.dispatchEvent(c)}},E=!1;try{var D=Object.defineProperty({},"passive",{get:function(){E={passive:!i.preventScroll}}});window.addEventListener("testPassive",null,D),window.removeEventListener("testPassive",null,D)}catch{}return i.touch&&(r.addEventListener("touchmove",T,E),r.addEventListener("touchend",A)),{off:function(){r.removeEventListener("touchmove",T,E),r.removeEventListener("touchend",A),r.removeEventListener("mousedown",b),r.removeEventListener("mouseup",a),r.removeEventListener("mousemove",h)}}}};n.exports=t,n.exports.default=t})(J);var Le=J.exports;const be=te(Le),K="applet.fullscreen-emoji.emoji-cache",q=_e(()=>localStorage.getItem(K)??"null",JSON.parse,Se([]),Ce([De(ce("usedTimes"))])),Ae=n=>{const e=q(),t=e.find(r=>r.emoji===n);t?t.usedTimes+=1:e.push({emoji:n,usedTimes:1}),localStorage.setItem(K,JSON.stringify(e))},Ne="/portfolio-react/assets/emoji-favicon-Da_G2-bh.png",Oe="/portfolio-react/assets/Why-you-need-an-app-for-full-screen-emoji-DDt0yydU.png",B=ne({WhatIsThisAppFor:()=>{const n=H(),e=y.useCallback(t=>{t.preventDefault(),n.open()},[n]);return u.jsxs(oe,{open:n.isOpen,onOpenChange:t=>{!t&&n.close()},children:[u.jsx(ie,{asChild:!0,children:u.jsx(N,{variant:"link",onClick:e,className:"mb-4",children:"What is this for?"})}),u.jsxs(se,{children:[u.jsx(ae,{}),u.jsxs("div",{className:"mt-4",children:[u.jsx("img",{src:Oe,alt:"",style:{width:"100%",maxWidth:500}}),u.jsx("div",{className:"flex items-center gap-2",children:u.jsx(N,{variant:"link",asChild:!0,children:u.jsx("a",{href:"https://www.youtube.com/watch?v=TfNnpsYATbQ",target:"_blank",rel:"noreferrer",style:{flex:1},children:"TBBT S10E14: The Emotion Detection Automation"})})})]})]})]})},EmojiDialog:({emoji:n,onClose:e})=>{const t=y.useRef(null);return y.useEffect(()=>{const r=t.current;if(r)return be(r),r.addEventListener("swipe",e),()=>r.removeEventListener("swipe",e)},[e]),u.jsx("div",{ref:t,className:`z-1 fixed top-0 left-0 w-screen h-screen flex items-center justify-center
        bg-white dark:bg-black`,children:u.jsx("div",{className:"text-[256px]",children:n})})}});function Be(){const{isOpen:n,openWithData:e,close:t,data:r}=H(),i=y.useCallback(a=>{e(a),Ae(a)},[e]),o=y.useCallback(a=>{var D;a.preventDefault();const h=a.currentTarget,T=(D=new FormData(a.currentTarget).get("emoji"))==null?void 0:D.trim(),E=h.querySelector("input[name='emoji']");T&&E&&(E.blur(),E.value="",i(T))},[i]),s=y.useCallback(a=>{var h;a.key==="Enter"&&((h=a.currentTarget.form)==null||h.submit())},[]),b=y.useCallback(a=>{const h=a.currentTarget.dataset.emoji;h&&i(h)},[i]);return y.useEffect(()=>{const a=h=>{h.key==="Escape"&&t()};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[t]),y.useEffect(()=>{let a=document.querySelector("link[rel~='icon']");a||(a=document.createElement("link"),a.rel="icon",document.head.appendChild(a)),a.href=Ne},[]),u.jsxs("div",{className:"px-4",children:[u.jsx(B.WhatIsThisAppFor,{}),n&&u.jsx(B.EmojiDialog,{emoji:r,onClose:t}),u.jsxs("div",{children:[u.jsx("form",{onSubmit:o,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("label",{className:"flex items-center gap-2",children:[u.jsx("span",{style:{flex:0},children:"Emoji"}),u.jsx(re,{name:"emoji",onKeyUp:s})]}),u.jsx(N,{type:"submit",size:"sm",children:"Show!"})]})}),u.jsxs("div",{className:"flex items-center flex-wrap gap-2 mt-4",children:["Shortcuts",q().map(a=>u.jsx(N,{"data-emoji":a.emoji,onClick:b,variant:"outline",size:"icon",className:"text-xl",children:a.emoji},a.emoji))]})]})]})}export{Be as default};
